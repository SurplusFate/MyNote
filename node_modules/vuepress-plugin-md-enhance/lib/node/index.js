"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("vuepress-plugin-sass-palette"),t=require("vuepress-shared"),n=require("@vuepress/utils"),o=require("@vuepress/shared"),r=require("markdown-it/lib/token"),s=require("markdown-it/lib/helpers/parse_link_label"),a=require("katex"),i=require("@vuepress/plugin-container");function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=l(r),p=l(s),d=l(a);const u=["math","maction","maligngroup","malignmark","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mlongdiv","mmutiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mscarries","mscarry","msgroup","msline","mspace","msqrt","msrow","mstack","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","semantics","annotation","annotation-xml"],f=new t.Logger("vuepress-plugin-md-enhance"),m=(e,t)=>{const o=e.filePathRelative||e.path,{pages:r}=t,s=e.links.filter((({raw:e})=>e.match(/\.md(?:#.*?)$/))),a=[...s.filter((({raw:e})=>!e.startsWith("/"))).filter((({relative:e})=>r.every((({filePathRelative:t})=>t!==e)))),...s.filter((({raw:e})=>e.startsWith("/"))).filter((({absolute:e})=>r.every((({filePathRelative:t})=>!t||`/${t}`!==e))))].map((({raw:e})=>e));a.length&&n.logger.warn(`Broken links found in ${o}: ${a.join(", ")}`)},h=({options:e,deprecatedOption:t,newOption:n,msg:o="",scope:r=""})=>{if(t in e){if(f.warn(`"${t}" is deprecated${r?` in ${r}`:""}, please use "${n}" instead.${o?`\n${o}`:""}`),n.includes(".")){const o=n.split(".");let r=e;o.forEach(((n,s)=>{s!==o.length-1?(r[n]=r[n]||{},r=r[n]):r[n]=e[t]}))}else e[n]=e[t];delete e[t]}},k=(e,t,n="",o="")=>{t in e&&(f.error(`"${t}" is removed${o?`, please use ${o} instead.`:" and no longer supported"}${n?`\n${n}`:""}`),o||delete e[t])},g=(e,{name:t,marker:n=":",validate:o=(e=>e.trim().split(" ",2)[0]===t),openRender:r=((e,n,o,r,s)=>(e[n].attrJoin("class",t),s.renderToken(e,n,o))),closeRender:s=((e,t,n,o,r)=>r.renderToken(e,t,n))}={name:""})=>{const a=n[0],i=n.length;e.block.ruler.before("fence",`container_${t}`,((e,r,s,l)=>{let c=e.bMarks[r]+e.tShift[r],p=e.eMarks[r];if(a!==e.src[c])return!1;let d=c+1;for(;d<=p&&n[(d-c)%i]===e.src[d];)d+=1;const u=Math.floor((d-c)/i);if(u<3)return!1;d-=(d-c)%i;const f=e.src.slice(c,d),m=e.src.slice(d,p);if(!o(m,f))return!1;if(l)return!0;let h=r,k=!1;for(;h<s&&(h+=1,c=e.bMarks[h]+e.tShift[h],p=e.eMarks[h],!(c<p&&e.sCount[h]<e.blkIndent));)if(a===e.src[c]&&e.sCount[h]-e.blkIndent<4){for(d=c+1;d<=p&&n[(d-c)%i]===e.src[d];d++);if(Math.floor((d-c)/i)>=u&&(d-=(d-c)%i,d=e.skipSpaces(d),d>=p)){k=!0;break}}const g=e.parentType,b=e.lineMax;e.parentType="container",e.lineMax=h;const $=e.push(`container_${t}_open`,"div",1);$.markup=f,$.block=!0,$.info=m,$.map=[r,h],e.md.block.tokenize(e,r+1,h);const v=e.push(`container_${t}_close`,"div",-1);return v.markup=e.src.slice(c,d),v.block=!0,e.parentType=g,e.lineMax=b,e.line=h+(k?1:0),!0}),{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules[`container_${t}_open`]=r,e.renderer.rules[`container_${t}_close`]=s},b=e=>{["left","center","right","justify"].forEach((t=>e.use((e=>g(e,{name:t,openRender:()=>`<div style="text-align: ${t}">`})))))},$=e=>{g(e,{name:"chart",openRender:(e,t)=>{const o=e[t].info.trimStart().slice(5).trim(),r=`chart-${n.hash(t)}`;let s="{}",a="";for(let n=t;n<e.length;n++){const{type:t,content:o,info:r}=e[n];if("container_chart_close"===t)break;o&&("fence"===t&&("json"===r?(s=encodeURIComponent(o),a="json"):"js"!==r&&"javascript"!==r||(s=encodeURIComponent(o),a="js")),e[n].type="chart_empty",e[n].hidden=!0)}return`<ChartJS id="${r}" config="${s}" ${o?`title="${encodeURIComponent(o)}" `:""}type="${a}">`},closeRender:()=>"</ChartJS>"})},v={useBabel:!1,jsLib:[],cssLib:[],codepenLayout:"left",codepenEditors:"101",babel:"https://unpkg.com/@babel/standalone/babel.min.js",vue:"https://unpkg.com/vue/dist/vue.global.prod.js",react:"https://unpkg.com/react/umd/react.production.min.js",reactDOM:"https://unpkg.com/react-dom/umd/react-dom.production.min.js"},x=e=>t=>g(t,{name:e,openRender:(t,o)=>{const r=t[o].info.trimStart().slice(e.length).trim();let s="";const a={};for(let n=o;n<t.length;n++){const{type:o,content:r,info:i}=t[n];if(o===`container_${e}_close`)break;r&&("fence"===o&&("json"===i?s=encodeURIComponent(r):a[i]=r))}return`\n<CodeDemo id="code-demo-${n.hash(a)}" type="${e.split("-")[0]}"${r?` title="${encodeURIComponent(r)}"`:""}${s?` config="${s}"`:""} code="${encodeURIComponent(JSON.stringify(a))}">\n`},closeRender:()=>"</CodeDemo>"}),C=x("normal-demo"),y=x("vue-demo"),w=x("react-demo"),_=(e,{name:t,component:n,getter:o}={name:"tabs",component:"Tabs",getter:()=>[]})=>{const r="@tab";e.block.ruler.before("fence",`${t}_tabs`,((e,o,r,s)=>{let a=e.bMarks[o]+e.tShift[o],i=e.eMarks[o];if(":"!==e.src[a])return!1;let l=a+1;for(;l<=i&&":"===e.src[l];)l+=1;const c=l-a;if(c<3)return!1;const p=e.src.slice(a,l),d=e.src.slice(l,i),[u,f=""]=d.split("#",2);if(u.trim()!==t)return!1;if(s)return!0;let m=o,h=!1;for(;m<r&&(m+=1,a=e.bMarks[m]+e.tShift[m],i=e.eMarks[m],!(a<i&&e.sCount[m]<e.blkIndent));)if(":"===e.src[a]&&e.sCount[m]-e.blkIndent<4){for(l=a+1;l<=i&&":"===e.src[l];l++);if(l-a>=c&&(l=e.skipSpaces(l),l>=i)){h=!0;break}}const k=e.parentType,g=e.lineMax;e.parentType=`${t}_tabs`,e.lineMax=m-(h?1:0);const b=e.push(`${t}_tabs_open`,n,1);b.markup=p,b.block=!0,b.info=u,b.meta={id:f.trim()},b.map=[o,m-(h?1:0)],e.md.block.tokenize(e,o+1,m-(h?1:0));const $=e.push(`${t}_tabs_close`,n,-1);return $.markup=e.src.slice(a,l),$.block=!0,e.parentType=k,e.lineMax=g,e.line=m+(h?1:0),!0}),{alt:["paragraph","reference","blockquote","list"]}),e.block.ruler.__rules__.find((({name:e})=>"tab"===e))||e.block.ruler.before("fence","tab",((e,t,n,o)=>{let s,a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if("@"!==e.src.charAt(a))return!1;for(s=0;s<r.length;s++)if(r[s]!==e.src[a+s])return!1;const l=e.src.slice(a,a+s),c=e.src.slice(a+s,i);if(o)return!0;let p=t,d=!1;for(;p<n&&(p+=1,a=e.bMarks[p]+e.tShift[p],i=e.eMarks[p],!(a<i&&e.sCount[p]<e.blkIndent));)if("@"===e.src[a]&&e.sCount[p]<=e.sCount[t]){let t=!0;for(s=0;s<r.length;s++)if(r[s]!==e.src[a+s]){t=!1;break}if(t){d=!0,p-=1;break}}const u=e.parentType,f=e.lineMax;e.parentType="tab",e.lineMax=p;const m=e.push("tab_open","template",1),[h,k]=c.replace(/^:active/,"").split("#",2);m.block=!0,m.markup=l,m.info=h.trim(),m.meta={active:c.includes(":active")},k&&(m.meta.value=k.trim()),m.map=[t,p],e.md.block.tokenize(e,t+1,p);const g=e.push("tab_close","template",-1);return g.block=!0,g.markup="",e.parentType=u,e.lineMax=f,e.line=p+(d?1:0),!0}),{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules[`${t}_tabs_open`]=(e,r,s,a,i)=>{const{meta:l}=e[r],c=[],p=o(e,r,s,a,i);let d=-1,u=!1;for(let n=r;n<e.length;n++){const{block:o,meta:r,type:s,info:a}=e[n];if(o){if(s===`${t}_tabs_close`)break;if(s===`${t}_tabs_open`)continue;if("tab_open"===s){r.active&&(d=c.length),e[n].attrPush([`#tab${c.length}`,"{ title, value, isActive }"]),u=!0,c.push({title:a,...r.value?{value:r.value}:{}});continue}if("tab_close"===s)continue;u||(e[n].type=`${t}_tabs_empty`,e[n].hidden=!0)}}return`<${n} :data='${JSON.stringify(c.map(((e,t)=>({...e,...p[t]})))).replace(/'/g,"&#39")}'${-1!==d?` :active="${d}"`:""}${l.id?` tab-id="${l.id}"`:""}>\n`},e.renderer.rules[`${t}_tabs_close`]=()=>`</${n}>\n`},M=e=>{_(e,{name:"code-tabs",component:"CodeTabs",getter:(e,t)=>{let n=!1,o=!1;for(let r=t;r<e.length;r++){const{block:t,type:s}=e[r];if(t){if("code-tabs_tabs_close"===s)break;if("tab_close"===s){n=!1;continue}if("tab_open"===s){n=!0,o=!1;continue}if(n&&"fence"===s&&!o){o=!0;continue}e[r].type="code_tab_empty",e[r].hidden=!0}}return[]}})},I=e=>(t,n,r,s)=>{const a=t[n];if(1===a.nesting){let t=a.info.trim().slice(7).trim();if(!t&&e){const{filePathRelative:n}=s,r=o.ensureLeadingSlash(n??""),a=o.resolveLocalePath(e,r);t=(e[a]??{}).defaultInfo||"Details"}return`<details class="custom-container details"><summary>${t||"Details"}</summary>\n`}return"</details>\n"},S=e=>{g(e,{name:"echarts",openRender:(e,t)=>{const o=e[t].info.trimStart().slice(7).trim(),r=`echarts-${n.hash(t)}`;let s="{}",a="";for(let n=t;n<e.length;n++){const{type:t,content:o,info:r}=e[n];if("container_echarts_close"===t)break;o&&("fence"===t&&("json"===r?(s=encodeURIComponent(o),a="json"):"js"!==r&&"javascript"!==r||(s=encodeURIComponent(o),a="js")),e[n].type="echarts_empty",e[n].hidden=!0)}return`<ECharts id="${r}" config="${s}" ${o?`title="${encodeURIComponent(o)}" `:""}type="${a}">`},closeRender:()=>"</ECharts>"})},A=(e,t)=>{const o=e[t],r=`flowchart-${n.hash(t)}`,{content:s,info:a}=o;return`<FlowChart id="${r}" code="${encodeURIComponent(s)}" preset="${a.trim().split(":",2)[1]||"vue"}"></FlowChart>`},j=e=>{const t=e.renderer.rules.fence;e.renderer.rules.fence=(...e)=>{const[n,o]=e,{info:r}=n[o],s=r.split(":",2)[0];return"flow"===s||"flowchart"===s?A(n,o):t(...e)},e.renderer.rules.flowchart=A},R=(e,t)=>e[t].meta.subId>0?`:${e[t].meta.subId}`:"",T=(e,t,n,o)=>`${"string"==typeof o.docId?`-${o.docId}-`:""}${(e[t].meta.id+1).toString()}`,O=(e,t)=>`[${(e[t].meta.id+1).toString()}${R(e,t)}]`,D=(e,t,n,o,r)=>{const s=r.rules.footnoteAnchorName(e,t,n,o,r);return`<sup class="footnote-ref"><a href="#footnote${s}">${r.rules.footnoteCaption(e,t,n,o,r)}</a><a class="footnote-anchor" id="footnote-ref${s}${R(e,t)}" /></sup>`},E=(e,t,n)=>(n.xhtmlOut?'<hr class="footnotes-sep" />\n':'<hr class="footnotes-sep">\n')+'<section class="footnotes">\n<ol class="footnotes-list">\n',P=()=>"</ol>\n</section>\n",z=(e,t,n,o,r)=>`<li id="footnote${r.rules.footnoteAnchorName(e,t,n,o,r)}${R(e,t)}" class="footnote-item">`,N=()=>"</li>\n",L=(e,t,n,o,r)=>` <a href="#footnote-ref${r.rules.footnoteAnchorName(e,t,n,o,r)}${R(e,t)}" class="footnote-backref">↩︎</a>`,F=(e,t,n,o)=>{let r,s,a,i;const l=e.bMarks[t]+e.tShift[t],p=e.eMarks[t];if(l+4>p)return!1;if("["!==e.src.charAt(l))return!1;if("^"!==e.src.charAt(l+1))return!1;for(r=l+2;r<p;r++){if(" "===e.src.charAt(r))return!1;if("]"===e.src.charAt(r))break}if(r===l+2)return!1;if(r+1>=p||":"!==e.src.charAt(++r))return!1;if(o)return!0;r+=1,e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.refs||(e.env.footnotes.refs={});const d=e.src.slice(l+2,r-2);e.env.footnotes.refs[`:${d}`]=-1,s=new c.default("footnoteReferenceOpen","",1),s.meta={label:d},s.level=e.level++,e.tokens.push(s);const u=e.bMarks[t],f=e.tShift[t],m=e.sCount[t],h=e.parentType,k=r,g=e.sCount[t]+r-(e.bMarks[t]+e.tShift[t]);for(a=e.sCount[t]+r-(e.bMarks[t]+e.tShift[t]);r<p;){if(i=e.src.charAt(r),"\t"===i)a+=4-a%4;else{if(" "!==i)break;a+=1}r+=1}return e.tShift[t]=r-k,e.sCount[t]=a-g,e.bMarks[t]=k,e.blkIndent+=4,e.parentType="footnote",e.sCount[t]<e.blkIndent&&(e.sCount[t]+=e.blkIndent),e.md.block.tokenize(e,t,n),e.parentType=h,e.blkIndent-=4,e.tShift[t]=f,e.sCount[t]=m,e.bMarks[t]=u,s=new c.default("footnoteReferenceClose","",-1),s.level=--e.level,e.tokens.push(s),!0},U=(e,t)=>{let n,o,r;const s=e.posMax,a=e.pos;if(a+2>=s)return!1;if("^"!==e.src.charAt(a))return!1;if("["!==e.src.charAt(a+1))return!1;const i=a+2,l=p.default(e,a+1);return!(l<0)&&(t||(e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.list||(e.env.footnotes.list=[]),n=e.env.footnotes.list.length,e.md.inline.parse(e.src.slice(i,l),e.md,e.env,r=[]),o=e.push("footnoteRef","",0),o.meta={id:n},e.env.footnotes.list[n]={content:e.src.slice(i,l),tokens:r}),e.pos=l+1,e.posMax=s,!0)},q=(e,t)=>{let n,o,r,s;const a=e.posMax,i=e.pos;if(i+3>a)return!1;if(!e.env.footnotes||!e.env.footnotes.refs)return!1;if("["!==e.src.charAt(i))return!1;if("^"!==e.src.charAt(i+1))return!1;for(n=i+2;n<a;n++){if(" "===e.src.charAt(n))return!1;if("\n"===e.src.charAt(n))return!1;if("]"===e.src.charAt(n))break}if(n===i+2)return!1;if(n>=a)return!1;n+=1;const l=e.src.slice(i+2,n-1);return void 0!==e.env.footnotes.refs[`:${l}`]&&(t||(e.env.footnotes.list||(e.env.footnotes.list=[]),e.env.footnotes.refs[`:${l}`]<0?(o=e.env.footnotes.list.length,e.env.footnotes.list[o]={label:l,count:0},e.env.footnotes.refs[`:${l}`]=o):o=e.env.footnotes.refs[`:${l}`],r=e.env.footnotes.list[o].count,e.env.footnotes.list[o].count=e.env.footnotes.list[o].count+1,s=e.push("footnoteRef","",0),s.meta={id:o,subId:r,label:l}),e.pos=n,e.posMax=a,!0)},G=e=>{let t,n,o,r,s,a=!1;const i={};if(!e.env.footnotes)return!1;if(e.tokens=e.tokens.filter((e=>"footnoteReferenceOpen"===e.type?(a=!0,r=[],s=e.meta.label,!1):"footnoteReferenceClose"===e.type?(a=!1,i[`:${s}`]=r,!1):(a&&r.push(e),!a))),!e.env.footnotes.list)return!1;const{list:l}=e.env.footnotes;n=new c.default("footnoteBlockOpen","",1),e.tokens.push(n);for(let r=0,{length:s}=l;r<s;r++){n=new c.default("footnoteOpen","",1),n.meta={id:r,label:l[r].label},e.tokens.push(n),l[r].tokens?(o=[],n=new c.default("paragraph_open","p",1),n.block=!0,o.push(n),n=new c.default("inline","",0),n.children=l[r].tokens,n.content=l[r].content,o.push(n),n=new c.default("paragraph_close","p",-1),n.block=!0,o.push(n)):o=l[r].label?i[`:${l[r].label}`]:[],o&&(e.tokens=e.tokens.concat(o)),t="paragraph_close"===e.tokens[e.tokens.length-1].type&&e.tokens.pop()||null;for(let t=0;t<(Number(l[r].count)>0?l[r].count:1);t++)n=new c.default("footnoteAnchor","",0),n.meta={id:r,subId:t,label:l[r].label},e.tokens.push(n);t&&e.tokens.push(t),n=new c.default("footnoteClose","",-1),e.tokens.push(n)}return n=new c.default("footnoteBlockClose","",-1),e.tokens.push(n),!0},B=e=>{e.renderer.rules.footnoteRef=D,e.renderer.rules.footnoteBlockOpen=E,e.renderer.rules.footnoteBlockClose=P,e.renderer.rules.footnoteOpen=z,e.renderer.rules.footnoteClose=N,e.renderer.rules.footnoteAnchor=L,e.renderer.rules.footnoteCaption=O,e.renderer.rules.footnoteAnchorName=T,e.block.ruler.before("reference","footnoteDef",F,{alt:["paragraph","reference"]}),e.inline.ruler.after("image","footnoteInline",U),e.inline.ruler.after("footnoteInline","footnoteRef",q),e.core.ruler.after("inline","footnoteTail",G)},V=(e,{light:t=["gh-light-mode-only","light"],dark:n=["gh-dark-mode-only","dark"]}={})=>{const o=e.renderer.rules.image;e.renderer.rules.image=(e,r,s,a,i)=>{const l=e[r],c=l.attrGet("src");return c&&(t.some((e=>c.endsWith(`#${e}`)))?(l.attrSet("data-mode","lightmode-only"),l.attrSet("src",c.replace(/#.*?$/,""))):n.some((e=>c.endsWith(`#${e}`)))&&(l.attrSet("data-mode","darkmode-only"),l.attrSet("src",c.replace(/#.*?$/,"")))),o(e,r,s,a,i)}},W=(e,t,n)=>{let o;const r=t,s={ok:!1,pos:t,value:""};for(o=e.charCodeAt(t);t<n&&o>=48&&o<=57||37===o;)o=e.charCodeAt(++t);return s.ok=!0,s.pos=t,s.value=e.slice(r,t),s},J=(e,t)=>{const n=e.env,o=e.pos,r=e.posMax;if("!"!==e.src.charAt(e.pos))return!1;if("["!==e.src.charAt(e.pos+1))return!1;const s=e.pos+2,a=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(a<0)return!1;let i,l=a+1,c="",p="",d="",u="";if(l<r&&"("===e.src.charAt(l)){for(l+=1;l<r&&(i=e.src.charCodeAt(l),e.md.utils.isSpace(i)||10===i);l++);if(l>=r)return!1;let t;t=e.md.helpers.parseLinkDestination(e.src,l,e.posMax),t.ok&&(c=e.md.normalizeLink(t.str),e.md.validateLink(c)?l=t.pos:c="");const n=l;for(;l<r&&(i=e.src.charCodeAt(l),e.md.utils.isSpace(i)||10===i);l++);if(t=e.md.helpers.parseLinkTitle(e.src,l,e.posMax),l<r&&n!==l&&t.ok)for(p=t.str,l=t.pos;l<r&&(i=e.src.charCodeAt(l),e.md.utils.isSpace(i)||10===i);l++);else p="";if(l-1>=0&&(i=e.src.charCodeAt(l-1),32===i&&(t=((e,t,n)=>{const o={ok:!1,pos:0,width:"",height:""};if(t>=n)return o;if("="!==e.charAt(t))return o;t+=1;const r=e.charCodeAt(t);if(120!==r&&(r<48||r>57))return o;const s=W(e,t,n);if(t=s.pos,"x"!==e.charAt(t))return o;const a=W(e,t+=1,n);return t=a.pos,o.width=s.value,o.height=a.value,o.pos=t,o.ok=!0,o})(e.src,l,e.posMax),t.ok)))for(d=t.width,u=t.height,l=t.pos;l<r&&(i=e.src.charCodeAt(l),32===i||10===i);l++);if(l>=r||")"!==e.src.charAt(l))return e.pos=o,!1;l+=1}else{let t="";if(void 0===n.references)return!1;if(l<r&&"["===e.src.charAt(l)){const n=l+1;l=e.md.helpers.parseLinkLabel(e,l),l>=0?t=e.src.slice(n,l++):l=a+1}else l=a+1;t||(t=e.src.slice(s,a));const i=n.references[e.md.utils.normalizeReference(t)];if(!i)return e.pos=o,!1;c=i.href,p=i.title||""}if(!t){const t=e.src.slice(s,a),n=[];e.md.inline.parse(t,e.md,e.env,n);const o=e.push("image","img",0);o.attrs=[["src",c],["alt",""]],p&&o.attrs.push(["title",p]),""!==d&&o.attrs.push(["width",d]),""!==u&&o.attrs.push(["height",u]),o.children=n,o.content=t}return e.pos=l,e.posMax=r,!0},X=e=>{e.inline.ruler.before("emphasis","image",J)},H=/\r\n?|\n/g,K=/\\([ \\!"#$%&'()*+,./:;<=>?@[\]^_`{|}~-])/gu,Y=(e,t,n)=>{const o=e.attrIndex(t),r=[t,n];o<0?e.attrPush(r):e.attrs[o]=r},Q=(e,t)=>{const n=e[t].level-1;for(let o=t-1;o>=0;o--)if(e[o].level===n)return o;return-1},Z=e=>e.replace(/&/gu,"&amp;").replace(/</gu,"&lt;").replace(/>/gu,"&gt;").replace(/"/gu,"&quot;").replace(/'/gu,"&#039;"),ee=(e,t)=>{const n=t>0?e.src.charAt(t-1):"",o=t+1<=e.posMax?e.src.charAt(t+1):"";return{canOpen:" "!==o&&"\t"!==o,canClose:!(" "===n||"\t"===n||/[0-9]/u.exec(o))}},te=(e,t)=>{let n,o,r,s;if("$"!==e.src[e.pos])return!1;if(r=ee(e,e.pos),!r.canOpen)return t||(e.pending+="$"),e.pos+=1,!0;const a=e.pos+1;for(n=a;-1!==(n=e.src.indexOf("$",n));){for(o=n-1;"\\"===e.src[o];)o-=1;if((n-o)%2==1)break;n+=1}return-1===n?(t||(e.pending+="$"),e.pos=a,!0):n-a==0?(t||(e.pending+="$$"),e.pos=a+1,!0):(r=ee(e,n),r.canClose?(t||(s=e.push("inlineTex","math",0),s.markup="$",s.content=e.src.slice(a,n)),e.pos=n+1,!0):(t||(e.pending+="$"),e.pos=a,!0))},ne=(e,t,n,o)=>{let r,s,a,i,l=!1,c=e.bMarks[t]+e.tShift[t],p=e.eMarks[t];if(c+2>p)return!1;if("$$"!==e.src.slice(c,c+2))return!1;if(c+=2,r=e.src.slice(c,p),o)return!0;for(r.trim().endsWith("$$")&&(r=r.trim().slice(0,-2),l=!0),a=t;!l&&(a+=1,!(a>=n))&&(c=e.bMarks[a]+e.tShift[a],p=e.eMarks[a],!(c<p&&e.tShift[a]<e.blkIndent));)e.src.slice(c,p).trim().endsWith("$$")&&(i=e.src.slice(0,p).lastIndexOf("$$"),s=e.src.slice(c,i),l=!0);e.line=a+1;const d=e.push("blockTex","math",0);return d.block=!0,d.content=(r?.trim()?`${r}\n`:"")+e.getLines(t+1,a,e.tShift[t],!0)+(s?.trim()?s:""),d.map=[t,e.line],d.markup="$$",!0},oe=(e,t={throwOnError:!1})=>{e.inline.ruler.after("escape","inlineTex",te),e.block.ruler.after("blockquote","blockTex",ne,{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.inlineTex=(e,n)=>((e,t)=>{try{return d.default.renderToString(e,{...t,displayMode:!1})}catch(n){return t.throwOnError&&console.warn(n),`<span class='katex-error' title='${Z(n.toString())}'>${Z(e)}</span>`}})(e[n].content,t),e.renderer.rules.blockTex=(e,n)=>`${((e,t)=>{try{return`<p class='katex-block'>${d.default.renderToString(e,{...t,displayMode:!0,strict:e=>"newLineInDisplayMode"===e?"ignore":"warn"})}</p>`}catch(n){return t.throwOnError&&console.warn(n),`<p class='katex-block katex-error' title='${Z(n.toString())}'>${Z(e)}</p>`}})(e[n].content,t)}\n`},re=e=>{const t=e.renderer.rules.image;e.renderer.rules.image=(e,n,o,r,s)=>(e[n].attrSet("loading","lazy"),t(e,n,o,r,s))},se=(e,t)=>{const n=e.pos,o=e.src.charAt(n);if(t||"="!==o)return!1;const r=e.scanDelims(e.pos,!0);let s,{length:a}=r;if(a<2)return!1;a%2&&(s=e.push("text","",0),s.content=o,a-=1);for(let t=0;t<a;t+=2)s=e.push("text","",0),s.content=`${o}${o}`,(r.can_open||r.can_close)&&e.delimiters.push({marker:61,length:0,jump:t/2,token:e.tokens.length-1,end:-1,open:r.can_open,close:r.can_close});return e.pos+=r.length,!0},ae=(e,t)=>{let n;const o=[],r=t.length;for(let s=0;s<r;s++){const r=t[s];if(61===r.marker&&-1!==r.end){const s=t[r.end];n=e.tokens[r.token],n.type="mark_open",n.tag="mark",n.nesting=1,n.markup="==",n.content="",n=e.tokens[s.token],n.type="mark_close",n.tag="mark",n.nesting=-1,n.markup="==",n.content="","text"===e.tokens[s.token-1].type&&"="===e.tokens[s.token-1].content&&o.push(s.token-1)}}for(;o.length;){const t=o.pop();let r=t+1;for(;r<e.tokens.length&&"mark_close"===e.tokens[r].type;)r+=1;r-=1,t!==r&&(n=e.tokens[r],e.tokens[r]=e.tokens[t],e.tokens[t]=n)}},ie=e=>{e.inline.ruler.before("emphasis","mark",se),e.inline.ruler2.before("emphasis","mark",(e=>{const t=e.tokens_meta||[];ae(e,e.delimiters);for(let n=0;n<t.length;n++){const o=t[n];o?.delimiters&&ae(e,o.delimiters)}return!0}))},le=/^@include\(([^)]*?)(?:\{(\d+)?-(\d+)?\})?\)$/,ce=({filePath:e,lineStart:t,lineEnd:o},{cwd:r,includedFiles:s})=>{let a=e;if(!n.path.isAbsolute(e)){if(!r)return console.error(`Include: Error when resolving path: ${e}`),"\nError when resolving path\n";a=n.path.resolve(r,e)}if(s.push(a),!n.fs.existsSync(a))return console.error(`Include: ${a} not found`),"\nFile not found\n";return n.fs.readFileSync(a).toString().replace(H,"\n").split("\n").slice(t?t-1:t,o).join("\n").replace(/\n?$/,"\n")},pe=(e,t,{cwd:o,includedFiles:r})=>e.split("\n").map((e=>{if(e.startsWith("@include")){const s=e.match(le);if(s){const[,e,a,i]=s,l=t.getPath(e),c=ce({filePath:l,lineStart:a?Number.parseInt(a,10):0,lineEnd:i?Number.parseInt(i,10):void 0},{cwd:o,includedFiles:r});return t.deep&&l.endsWith(".md")?pe(c,t,{cwd:n.path.isAbsolute(l)?n.path.dirname(l):o?n.path.resolve(o,n.path.dirname(l)):null,includedFiles:r}):c}}return e})).join("\n"),de=e=>t=>{const o=t.env,r=o.includedFiles||(o.includedFiles=[]);t.src=pe(t.src,e,{cwd:o.filePath?n.path.dirname(o.filePath):null,includedFiles:r})},ue=(e,{getPath:t=(e=>e),deep:n=!1}={})=>{e.core.ruler.after("normalize","md_import",de({getPath:t,deep:n}))},fe=(e,t)=>{const o=e[t],r=`mermaid-${n.hash(t)}`,{content:s}=o;return`<Mermaid id="${r}" code="${encodeURIComponent(s)}"></Mermaid>`},me=(e,t,o)=>`<Mermaid id="mermaid-${n.hash(o)}" code="${encodeURIComponent(`${e}\n${t.split("\n").map((e=>e?`  ${e}`:"")).join("\n")}`)}"></Mermaid>`,he=e=>{const t=e.renderer.rules.fence;e.renderer.rules.fence=(...e)=>{const[n,o]=e,{content:r,info:s}=n[o];return"mermaid"===s.trim()?fe(...e):"sequence"===s.trim()?me("sequenceDiagram",r,o):"class"===s.trim()?me("classDiagram",r,o):"state"===s.trim()?me("stateDiagram-v2",r,o):"er"===s.trim()?me("erDiagram",r,o):"journey"===s.trim()?me("journey",r,o):"gantt"===s.trim()?me("gantt",r,o):"pie"===s.trim()?me("pie",r,o):"git-graph"===s.trim()?me("gitGraph",r,o):t(...e)},e.renderer.rules.mermaid=fe},ke=(e,{name:t,open:n,close:o,render:r}={name:"uml",open:"start",close:"end",render:(e,t)=>{const n=e[t],{content:o,info:r,type:s}=n;return`<div class="${s}" title="${r}">${o}</div>`}})=>{const s=`@${n}`,a=`@${o}`;e.block.ruler.before("fence",t,((e,n,o,r)=>{let i,l=!1,c=e.bMarks[n]+e.tShift[n],p=e.eMarks[n];if("@"!==e.src.charAt(c))return!1;for(i=0;i<s.length;++i)if(s[i]!==e.src[c+i])return!1;const d=e.src.slice(c,c+i),u=e.src.slice(c+i,p);if(r)return!0;let f=n;for(;f<o&&(c=e.bMarks[f]+e.tShift[f],p=e.eMarks[f],!(c<p&&e.sCount[f]<e.blkIndent));){if("@"===e.src.charAt(c)&&e.sCount[f]<=e.sCount[n]){let t=!0;for(i=0;i<a.length;++i)if(a[i]!==e.src[c+i]){t=!1;break}if(t&&e.skipSpaces(c+i)>=p){l=!0;break}}f+=1}const m=e.src.split("\n").slice(n+1,f).join("\n"),h=e.push(t,"fence",0);return h.block=!0,h.info=u,h.content=m,h.map=[n,f],h.markup=d,e.line=f+(l?1:0),!0}),{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules[t]=r},ge=e=>{e.use(ke,{name:"presentation",open:"slidestart",close:"slideend",render:(e,t)=>{const o=e[t],r=`presentation-${n.hash(t)}`,{content:s,info:a}=o;return`<Presentation id="${r}" data-code="${encodeURIComponent(s)}" theme="${a.trim()||"auto"}"></Presentation>`}})},be=(e,t)=>{let n,o;const r=e.posMax,s=e.pos;if("~"!==e.src.charAt(s))return!1;if(t)return!1;if(s+2>=r)return!1;for(e.pos=s+1;e.pos<r;){if("~"===e.src.charAt(e.pos)){n=!0;break}e.md.inline.skipToken(e)}if(!n||s+1===e.pos)return e.pos=s,!1;const a=e.src.slice(s+1,e.pos);return/(^|[^\\])(\\\\)*\s/u.exec(a)?(e.pos=s,!1):(e.posMax=e.pos,e.pos=s+1,o=e.push("sub_open","sub",1),o.markup="~",o=e.push("text","",0),o.content=a.replace(K,"$1"),o=e.push("sub_close","sub",-1),o.markup="~",e.pos=e.posMax+1,e.posMax=r,!0)},$e=e=>{e.inline.ruler.after("emphasis","sub",be)},ve=(e,t)=>{let n,o;const r=e.posMax,s=e.pos;if("^"!==e.src.charAt(s))return!1;if(t)return!1;if(s+2>=r)return!1;for(e.pos=s+1;e.pos<r;){if("^"===e.src.charAt(e.pos)){n=!0;break}e.md.inline.skipToken(e)}if(!n||s+1===e.pos)return e.pos=s,!1;const a=e.src.slice(s+1,e.pos);return/(^|[^\\])(\\\\)*\s/u.exec(a)?(e.pos=s,!1):(e.posMax=e.pos,e.pos=s+1,o=e.push("sup_open","sup",1),o.markup="^",o=e.push("text","",0),o.content=a.replace(K,"$1"),o=e.push("sup_close","sup",-1),o.markup="^",e.pos=e.posMax+1,e.posMax=r,!0)},xe=e=>{e.inline.ruler.after("emphasis","sup",ve)},Ce=(e,t)=>"inline"===e[t]?.type&&(e=>"paragraph_open"===e?.type)(e[t-1])&&(e=>"list_item_open"===e?.type)(e[t-2])&&(e=>/^\[[xX \u00A0]\][ \u00A0]/.test(e.content))(e[t]),ye=(e,t,n)=>{const o="task-item-"+t.env.tasklists++;e.children=e.children||[],e.children[0].content=e.children[0].content.slice(3),n.label&&(e.children.unshift((e=>{const t=new c.default("label_open","label",1);return t.attrs=[["class","task-list-item-label"],["for",e]],t})(o)),e.children.push(new c.default("label_close","label",-1))),e.children.unshift(((e,t,n=!0)=>{const o=new c.default("checkbox_input","input",0);return o.attrs=[["type","checkbox"],["class","task-list-item-checkbox"],["id",t]],/^\[[xX]\][ \u00A0]/.test(e.content)&&o.attrs.push(["checked","checked"]),n&&o.attrs.push(["disabled","disabled"]),o})(e,o,n.disabled))},we=(e,{disabled:t=!0,label:n=!0}={})=>{e.core.ruler.after("inline","github-task-lists",(e=>{const o=e.tokens;e.env.tasklists||(e.env.tasklists=0);for(let r=2;r<o.length;r++)Ce(o,r)&&(ye(o[r],e,{disabled:t,label:n}),Y(o[r-2],"class","task-list-item"),Y(o[Q(o,r-2)],"class","task-list-container"));return!0}))},_e=e=>{g(e,{name:"v-pre",openRender:()=>"<div v-pre>\n",closeRender:()=>"</div>\n"})},Me=(e,t=[])=>{0!=Object.keys(t).length&&e.core.ruler.push("stylize_tag",(({env:e,tokens:n})=>{const{noStylize:o}=e.frontmatter||{};n.forEach((({type:e,children:n})=>{"inline"===e&&((e,t,n=[])=>{for(let o=1,r=e.length;o<r-1;o++){const r=e[o],{content:s,type:a}=r;if("text"!==a||n.includes(s))continue;const i=t.find((({matcher:e})=>"string"==typeof e?e===s:e.test(s))),l=e[o-1],c=e[o+1];if(i&&l.tag===c.tag&&1===l.nesting&&-1===c.nesting){const e=i.replacer({tag:l.tag,content:r.content,attrs:Object.fromEntries(l.attrs||[])});e&&(l.tag=c.tag=e.tag,l.attrs=Object.entries(e.attrs),r.content=e.content),o+=2}}})(n||[],t,o)}))}))},Ie=e=>{e.use(g,{name:"demo",openRender:(e,t)=>{const{info:o}=e[t],r=/\[(.*)\]/u.exec(o),s=/^ demo\s*(?:\[.*?\])?\s*(.*)\s*$/u.exec(o);let a="";const i={};for(let n=t;n<e.length;n++){const{type:t,content:o,info:r}=e[n];if("container_demo_close"===t)break;o&&("fence"===t&&("json"===r?a=encodeURIComponent(o):i[r]=o))}return`\n<CodeDemo id="code-demo-${n.hash(i)}" type="${r?.[1]||"normal"}"${s?` title="${encodeURIComponent(s[1])}"`:""}${a?` config="${a}"`:""} code="${encodeURIComponent(JSON.stringify(i))}">\n`},closeRender:()=>"</CodeDemo>"})},Se=e=>{e.use(g,{name:"code-group",openRender:(e,t,n,o)=>(f.warn("Deprecated code-group syntax found"+(o.filePathRelative?`in ${o.filePathRelative}`:"")),"<CodeGroup>\n"),closeRender:()=>"</CodeGroup>\n"}),e.use(g,{name:"code-group-item",openRender:(e,t)=>{const{info:n}=e[t],o="active"===n.split(":").pop();return`<CodeGroupItem title="${o?n.replace(/:active$/,""):n}"${o?" active":""}>\n`},closeRender:()=>"</CodeGroupItem>\n"})},Ae=e=>{ke(e,{name:"flowchart",open:"flowstart",close:"flowend",render:(e,t)=>{console.warn('"@flowstart ... @flowend" is deprecated, you should use ```flow ... ``` instead.');const o=e[t],r=`flowchart_${n.hash(t)}`,{content:s,info:a}=o;return`<FlowChart id="${r}" code="${encodeURIComponent(s)}" preset="${a.trim()||"vue"}"></FlowChart>`}})},je=o.ensureEndingSlash(n.path.resolve(__dirname,"../client")),Re={"/en/":{info:"Info",note:"Note",tip:"Tips",warning:"Note",danger:"Warning",details:"Details"},"/zh/":{info:"相关信息",note:"注",tip:"提示",warning:"注意",danger:"警告",details:"详情"},"/zh-tw/":{info:"相關信息",note:"注",tip:"提示",warning:"注意",danger:"警告",details:"詳情"},"/de/":{info:"Information",note:"Note",tip:"Tips",warning:"Notiz",danger:"Warnung",details:"Details"},"/vi/":{info:"Thông tin",note:"Note",tip:"Tips",warning:"Lưu ý",danger:"Cẩn thận",details:"Chi tiết"},"/uk/":{info:"Інформація",note:"Note",tip:"Поради",warning:"Примітка",danger:"Увага",details:"Деталь"},"/ru/":{info:"Инфо",note:"Заметка",tip:"Совет",warning:"Примечание",danger:"Предупреждение",details:"Подробности"},"/br/":{info:"Informativo",note:"Note",tip:"Dicas",warning:"Avisos",danger:"Cuidado",details:"Detalhe"},"/pl/":{info:"Info",note:"Notatka",tip:"Porady",warning:"Notatka",danger:"Ostrzeżenie",details:"Dane"},"/sk/":{info:"Info",note:"Poznámka",tip:"Tip",warning:"Upozornenie",danger:"Pozor",details:"Podrobnosti"},"/fr/":{info:"Info",note:"Note",tip:"Conseil",warning:"Note",danger:"Avertissement",details:"Details"},"/es/":{info:"Información",note:"Nota",tip:"Consejos",warning:"Aviso",danger:"Advertencia",details:"Detalles"}},Te=(n={gfm:!0},o=!1)=>r=>{o&&(e=>{h({options:e,deprecatedOption:"codegroup",newOption:"codetabs"}),h({options:e,deprecatedOption:"mdImport",newOption:"include"}),k(e,"lineNumbers"),k(e,"imageFix")})(n),r.env.isDebug&&f.info(`Options: ${n.toString()}`);const s=(e,t=!1)=>e in n?Boolean(n[e]):t&&"gfm"in n?Boolean(n.gfm):n.enableAll||!1,a=s("chart"),l=s("echarts"),c=s("flowchart"),p=s("footnote",!0),d=s("imageMark",!0),g=s("tasklist",!0),x=s("mermaid"),A=s("presentation"),R=s("tex"),T=((e,t)=>{const{linkCheck:n="dev"}=t;return"boolean"==typeof n?n:"always"===n||e.env.isDev&&"dev"===n||e.env.isBuild&&"build"===n||!1})(r,n),O={macros:{"\\liiiint":"\\int\\!\\!\\!\\iiint","\\iiiint":"\\int\\!\\!\\!\\!\\iiint","\\idotsint":"\\int\\!\\cdots\\!\\int"},..."object"==typeof n.tex?n.tex:{}},D="object"==typeof n.presentation&&Array.isArray(n.presentation.plugins)?n.presentation.plugins:[];return e.useSassPalettePlugin(r,{id:"hope"}),((e,n)=>{const o=t.getLocales({app:e,name:"md-enhance",default:Re,config:n.locales}),r=e=>Object.fromEntries(Object.keys(o).map((t=>[t,{defaultInfo:o[t][e]}])));(n.container||n.enableAll)&&(["info","note","tip","warning","danger"].forEach((t=>e.use(i.containerPlugin({type:t,locales:r(t)})))),e.use(i.containerPlugin({type:"details",render:I(r("details"))})))})(r,n),{name:"vuepress-plugin-md-enhance",define:()=>({MARKDOWN_ENHANCE_DELAY:n.delay||500,CODE_DEMO_OPTIONS:{...v,..."object"==typeof n.demo?n.demo:{}},MERMAID_OPTIONS:"object"==typeof n.mermaid?n.mermaid:{},REVEAL_CONFIG:"object"==typeof n.presentation&&"object"==typeof n.presentation.revealConfig?n.presentation.revealConfig:{}}),extendsBundlerOptions:(e,n)=>{"html"!==O.output&&t.addCustomElement({app:n,config:e},u),a&&(t.addViteOptimizeDepsInclude({app:n,config:e},"chart.js/auto"),t.addViteSsrExternal({app:n,config:e},"chart.js")),l&&(t.addViteOptimizeDepsInclude({app:n,config:e},"echarts"),t.addViteSsrExternal({app:n,config:e},"echarts")),c&&(t.addViteOptimizeDepsInclude({app:n,config:e},"flowchart.js"),t.addViteSsrExternal({app:n,config:e},"flowchart.js")),x&&(t.addViteOptimizeDepsInclude({app:n,config:e},"mermaid"),t.addViteSsrExternal({app:n,config:e},"mermaid")),A&&(t.addViteOptimizeDepsExclude({app:n,config:e},["reveal.js/dist/reveal.esm.js","reveal.js/plugin/markdown/markdown.esm.js",...D.map((e=>`reveal.js/plugin/${e}/${e}.esm.js`))]),t.addViteSsrExternal({app:n,config:e},"reveal.js"))},extendsMarkdown:e=>{s("gfm")&&(e.options.linkify=!0),s("align")&&e.use(b),s("lazyLoad")&&e.use(re),d&&e.use(V,"object"==typeof n.imageMark?n.imageMark:{}),s("imageSize")&&e.use(X),s("sup")&&e.use(xe),s("sub")&&e.use($e),p&&e.use(B),s("mark")&&e.use(ie),g&&e.use(we,["object"==typeof n.tasklist?n.tasklist:{}]),(s("vpre")||o)&&e.use(_e),R&&e.use(oe,O),s("include")&&e.use(ue,["function"==typeof n.include?n.include:void 0]),s("stylize")&&e.use(Me,n.stylize),s("codetabs")&&(e.use(M),o&&e.use(Se)),s("tabs")&&e.use(_),c&&(e.use(j),e.use(Ae)),a&&e.use($),l&&e.use(S),s("demo")&&(e.use(C),e.use(y),e.use(w),o&&e.use(Ie)),x&&e.use(he),A&&e.use(ge)},extendsPage:(e,t)=>{T&&t.pages&&m(e,t)},onInitialized:async e=>{T&&e.pages.forEach((t=>m(t,e))),await(async(e,t)=>{const n=["reveal","revealMarkdown",...t.map((e=>`reveal${e[0].toUpperCase()}${e.substring(1)}`))];await e.writeTemp("md-enhance/reveal.js",`import { ${n.join(", ")} } from "${je}reveal";\n\nexport const useReveal = () => [${n.map((e=>`${e}()`)).join(", ")}\n];`)})(e,D)},clientConfigFile:e=>(async(e,t,n=!1)=>{let o="",r="";const s=(e,n=!1)=>e in t?Boolean(t[e]):n&&"gfm"in t?Boolean(t.gfm):t.enableAll||!1;return s("chart")&&(o+=`import ChartJS from "${je}components/ChartJS";\n`,r+='app.component("ChartJS", ChartJS);\n'),s("echarts")&&(o+=`import ECharts from "${je}components/ECharts";\n`,r+='app.component("ECharts", ECharts);\n'),s("demo")&&(o+=`import CodeDemo from "${je}components/CodeDemo";\n`,r+='app.component("CodeDemo", CodeDemo);\n'),s("codetabs")&&(o+=`import CodeTabs from "${je}components/CodeTabs";\n`,r+='app.component("CodeTabs", CodeTabs);\n',n&&(o+=`import { CodeGroup, CodeGroupItem } from "${je}compact";\n`,r+='app.component("CodeGroup", CodeGroup);\n',r+='app.component("CodeGroupItem", CodeGroupItem);\n')),s("flowchart")&&(o+=`import FlowChart from "${je}components/FlowChart";\n`,r+='app.component("FlowChart", FlowChart);\n'),s("mermaid")&&(o+=`import Mermaid from "${je}components/Mermaid";\n`,r+='app.component("Mermaid", Mermaid);\n'),s("presentation")&&(o+=`import Presentation from "${je}components/Presentation";\n`,r+='app.component("Presentation", Presentation);\n'),s("container")&&(o+=`import "${je}styles/container/index.scss";\n`),s("footnote")&&(o+=`import "${je}styles/footnote.scss";\n`),s("imageMark")&&(o+=`import "${je}styles/image-mark.scss";\n`),s("tabs")&&(o+=`import Tabs from "${je}components/Tabs";\n`,r+='app.component("Tabs", Tabs);\n'),s("tasklist")&&(o+=`import "${je}styles/tasklist.scss";\n`),s("tex")&&(o+=`import "${je}styles/tex.scss";\n`),e.writeTemp("md-enhance/config.js",`import { defineClientConfig } from "@vuepress/client";\n${o}\n\nexport default defineClientConfig({\n  enhance: ({ app }) => {\n${r.split("\n").map((e=>`    ${e}`)).join("\n")}\n  }\n});`)})(e,n,o)}};exports.CODE_DEMO_DEFAULT_SETTING=v,exports.align=b,exports.chart=$,exports.codeTabs=M,exports.container=g,exports.createIncludeCoreRule=de,exports.default=Te,exports.echarts=S,exports.flowchart=j,exports.footnote=B,exports.getDetailsRender=I,exports.handleInclude=ce,exports.imageMark=V,exports.imageSize=X,exports.include=ue,exports.katex=oe,exports.lazyLoad=re,exports.mark=ie,exports.mdEnhancePlugin=Te,exports.mermaid=he,exports.normalDemo=C,exports.presentation=ge,exports.reactDemo=w,exports.resolveInclude=pe,exports.stylize=Me,exports.sub=$e,exports.sup=xe,exports.tabs=_,exports.tasklist=we,exports.uml=ke,exports.vPre=_e,exports.vueDemo=y;
//# sourceMappingURL=index.js.map
